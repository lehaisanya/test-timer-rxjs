{"version":3,"sources":["services.ts","utils.ts","App.tsx","hooks.ts","index.tsx"],"names":["Actions","fill2char","str","length","actionSubject$","Subject","waitActionSubject$","waitAction$","pipe","timeInterval","mergeMap","value","interval","of","EMPTY","throttleTime","timer$","merge","startWith","PAUSE","switchMap","action","RESET","START","timer","mapTo","scan","time","inc","map","seconds","timeWithoutSeconds","Math","floor","minuts","hours","timerService","observable","start","next","stop","reset","wait","App","obs$","useState","state","setState","useEffect","sub","subscribe","unsubscribe","useObservable","className","onClick","ReactDOM","render","document","getElementById"],"mappings":"yJAeKA,E,yICfCC,EAAY,SAACC,GACf,OAAOA,EAAIC,OAAS,EAAI,IAAMD,EAAMA,I,SDcnCF,O,iBAAAA,I,iBAAAA,I,kBAAAA,M,KAML,IAAMI,EAAiB,IAAIC,IACrBC,EAAqB,IAAID,IAEzBE,EAAcD,EAAmBE,KACnCC,cACAC,aAAS,gBAAGC,EAAH,EAAGA,MAAH,SAAUC,UAbH,IAccC,YAAGF,GAASG,OAE1CC,YAhBgB,MAqBdC,EAFUC,YAAMb,EAAgBG,GAEfC,KACnBU,YAAUlB,EAAQmB,OAClBC,aAAU,SAACC,GACP,OAAQA,GACJ,KAAKrB,EAAQsB,MACT,OAAOT,aAAI,GACf,KAAKb,EAAQuB,MACT,OAAOC,YAAM,IAAM,KAAMhB,KAAKiB,YAAM,IACxC,KAAKzB,EAAQmB,MACT,OAAON,YAAG,OAGtBa,aAAK,SAACC,EAAMC,GACR,OAAY,IAARA,EACOD,EACAC,EAAM,EACND,EAAO,EAEP,KAGfE,aCnDsB,SAACF,GACvB,IAAMG,EAAU7B,EAAU,GAAD,OAAI0B,EAAO,KAC9BI,EAAqBC,KAAKC,MAAMN,EAAO,IACvCO,EAASjC,EAAU,GAAD,OAAI8B,EAAqB,KAC3CI,EAAQlC,EAAU,GAAD,OAAI+B,KAAKC,MAAMF,EAAqB,MAE3D,MAAM,GAAN,OAAUI,EAAV,cAAqBD,EAArB,cAAiCJ,ODgDxBM,EAAe,CACxBC,WAAY,kBAAMrB,GAClBsB,MAAO,WACHlC,EAAemC,KAAKvC,EAAQuB,QAEhCiB,KAAM,WACFpC,EAAemC,KAAKvC,EAAQmB,OAC5Bf,EAAemC,KAAKvC,EAAQsB,QAEhCmB,MAAO,WACHrC,EAAemC,KAAKvC,EAAQsB,OAC5BlB,EAAemC,KAAKvC,EAAQuB,QAEhCmB,KAAM,WACFpC,EAAmBiC,KAAKvC,EAAQmB,S,OEnElCH,EAASoB,EAAaC,aAoBbM,EAlBH,WACR,IAAMhB,ECLmB,SAAIiB,GAAyB,IAAD,EAC3BC,qBAD2B,mBAC9CC,EAD8C,KACvCC,EADuC,KAQrD,OALAC,qBAAU,WACN,IAAMC,EAAML,EAAKM,UAAUH,GAC3B,OAAO,kBAAME,EAAIE,iBAClB,CAACP,IAEGE,EDHMM,CAAcpC,GAE3B,OACI,qBAAKqC,UAAU,MAAf,SACI,sBAAKA,UAAU,YAAf,UACI,qBAAKA,UAAU,QAAf,SAAwB1B,IACxB,sBAAK0B,UAAU,UAAf,UACI,wBAAQA,UAAU,QAAQC,QAASlB,EAAaE,MAAhD,mBACA,wBAAQe,UAAU,OAAOC,QAASlB,EAAaI,KAA/C,kBACA,wBAAQa,UAAU,OAAOC,QAASlB,EAAaM,KAA/C,kBACA,wBAAQW,UAAU,QAAQC,QAASlB,EAAaK,MAAhD,4B,MEZpBc,IAASC,OACL,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.c1a48590.chunk.js","sourcesContent":["import { EMPTY, merge, of, Subject, timer } from \"rxjs\";\r\nimport {\r\n    map,\r\n    mapTo,\r\n    mergeMap,\r\n    scan,\r\n    startWith,\r\n    switchMap,\r\n    throttleTime,\r\n    timeInterval\r\n} from \"rxjs/operators\";\r\nimport { formatTime } from \"utils\";\r\n\r\nconst DUBLE_CLICK = 300;\r\n\r\nenum Actions {\r\n    START,\r\n    PAUSE,\r\n    RESET,\r\n}\r\n\r\nconst actionSubject$ = new Subject<Actions>();\r\nconst waitActionSubject$ = new Subject<Actions>();\r\n\r\nconst waitAction$ = waitActionSubject$.pipe(\r\n    timeInterval(),\r\n    mergeMap(({ value, interval }) =>\r\n        interval <= DUBLE_CLICK ? of(value) : EMPTY\r\n    ),\r\n    throttleTime(DUBLE_CLICK)\r\n);\r\n\r\nconst action$ = merge(actionSubject$, waitAction$);\r\n\r\nconst timer$ = action$.pipe(\r\n    startWith(Actions.PAUSE),\r\n    switchMap((action) => {\r\n        switch (action) {\r\n            case Actions.RESET:\r\n                return of(-1);\r\n            case Actions.START:\r\n                return timer(1000, 1000).pipe(mapTo(1));\r\n            case Actions.PAUSE:\r\n                return of(0);\r\n        }\r\n    }),\r\n    scan((time, inc) => {\r\n        if (inc === 0) {\r\n            return time\r\n        } else if (inc > 0) {\r\n            return time + 1\r\n        } else {\r\n            return 0\r\n        }\r\n    }),\r\n    map(formatTime)\r\n);\r\n\r\nexport const timerService = {\r\n    observable: () => timer$,\r\n    start: () => {\r\n        actionSubject$.next(Actions.START);\r\n    },\r\n    stop: () => {\r\n        actionSubject$.next(Actions.PAUSE);\r\n        actionSubject$.next(Actions.RESET);\r\n    },\r\n    reset: () => {\r\n        actionSubject$.next(Actions.RESET);\r\n        actionSubject$.next(Actions.START);\r\n    },\r\n    wait: () => {\r\n        waitActionSubject$.next(Actions.PAUSE);\r\n    },\r\n};\r\n","const fill2char = (str: string) => {\r\n    return str.length < 2 ? '0' + str : str\r\n}\r\n\r\nexport const formatTime = (time: number): string => {\r\n    const seconds = fill2char(`${time % 60}`)\r\n    const timeWithoutSeconds = Math.floor(time / 60)\r\n    const minuts = fill2char(`${timeWithoutSeconds % 60}`)\r\n    const hours = fill2char(`${Math.floor(timeWithoutSeconds / 60)}`)\r\n    \r\n    return `${hours} : ${minuts} : ${seconds}`\r\n}\r\n","import React from 'react'\n\nimport { useObservable } from 'hooks'\nimport { timerService } from 'services'\n\nconst timer$ = timerService.observable()\n\nconst App = () => {\n    const time = useObservable(timer$)\n\n    return (\n        <div className=\"app\">\n            <div className=\"container\">\n                <div className=\"timer\">{time}</div>\n                <div className=\"buttons\">\n                    <button className=\"start\" onClick={timerService.start}>Start</button>\n                    <button className=\"stop\" onClick={timerService.stop}>Stop</button>\n                    <button className=\"wait\" onClick={timerService.wait}>Wait</button>\n                    <button className=\"reset\" onClick={timerService.reset}>Reset</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default App\n","import { useEffect, useState } from \"react\"\r\nimport { Observable } from \"rxjs\"\r\n\r\nexport const useObservable = <T>(obs$: Observable<T>) => {\r\n    const [state, setState] = useState<T>()\r\n\r\n    useEffect(() => {\r\n        const sub = obs$.subscribe(setState)\r\n        return () => sub.unsubscribe()\r\n    }, [obs$])\r\n\r\n    return state\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}